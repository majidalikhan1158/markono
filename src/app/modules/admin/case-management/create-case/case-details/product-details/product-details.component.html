<div class="card card-custom example example-compact gutter-b product-details-card">
    <div class="card-body position-relative">
        <div class="row " style="margin: auto">
            <div class="col-lg-12 padding-0px">
                <div class="tab-content">
                    <!--begin::Table-->
                    <div class="">
                      <table class="table table-head-custom table-head-bg table-borderless table-vertical-center
                      product-datails-table">
                        <thead>
                          <tr class="text-left text-uppercase">
                            <th *ngFor="let item of columnsToDisplay"> {{item}}</th>
                          </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let rowId of productDetailsVMList;let i = index;">
                                <tr class="outer-row">
                                    <td>
                                        {{productDetailsVMList[i].id}}
                                    <td>
                                        <mat-form-field appearance="fill" class="width-150">
                                            <mat-label >Search</mat-label>
                                            <mat-icon matPrefix >search</mat-icon>
                                            <input matInput  [(ngModel)]="productDetailsVMList[i].isbn" [disabled]="disabled">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field appearance="fill" class="width-100">
                                            <mat-label>Choose</mat-label>
                                            <mat-select  [(ngModel)]="productDetailsVMList[i].printType" [disabled]="disabled" (selectionChange)="handlePrintTypeChange(productDetailsVMList[i].id)">
                                                <mat-option *ngFor="let item of printTypeList" [value]="item.value">{{item.value}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field appearance="fill" class="width-90">
                                            <mat-label >Order Qty</mat-label>
                                            <input type="number" min="0" matInput (change)="handleOrderQuantityChange(productDetailsVMList[i].id)"  [(ngModel)]="productDetailsVMList[i].orderQty" [disabled]="disabled">
                                        </mat-form-field>
                                    </td>
                                    <td>0</td>
                                    <td>
                                        <mat-form-field appearance="fill" class="width-90">
                                            <mat-label >Margin</mat-label>
                                            <input type="number" min="0" matInput  [(ngModel)]="productDetailsVMList[i].margin" [disabled]="disabled">
                                        </mat-form-field> 
                                    </td>
                                    <td>
                                        <mat-form-field appearance="fill" class="width-90">
                                            <mat-label >Selling Price</mat-label>
                                            <input type="number" min="0" matInput  [(ngModel)]="productDetailsVMList[i].sellingPrice" [disabled]="disabled">
                                        </mat-form-field>
                                    </td>
                                    <td>{{productDetailsVMList[i].prodQty}}</td>
                                    <td class="action-column pb-0">
                                        <span class="material-icons expansion-icon" (click)="showProductDetails(productDetailsVMList[i].id)">
                                            {{ 
                                                productDetailsVMList[i].id == rowIdToExpand ? 
                                                ExpansionIcons.KEYBOARD_ARROW_UP : 
                                                ExpansionIcons.KEYBOARD_ARROW_DOWN 
                                            }}
                                        </span>
                                    </td>
                                </tr>
                                <ng-container *ngIf="shouldShowProductDetails && productDetailsVMList[i].id == rowIdToExpand">
                                    <tr class="expandedRow">
                                        <td class="pr-0 pl-2 pb-0" colspan="9">
                                            <div class="col-lg-12 display-flex pl-1 pr-0">
                                                <div class="col-lg-2 pr-0 pl-1">
                                                    <p class="info-label">Title</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.title}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Total extent</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.totalExtent}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Binding Type</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.bindingType}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Product Group</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.productGroup}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Samples required</p>
                                                    <p class="info-label-value font-12px">
                                                        {{productDetailsVMList[i].productISBNDetail.samplesRequired}}
                                                        <span class="material-icons cursor-pointer font-14px" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                                            edit
                                                        </span>
                                                    </p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">BluePrint required</p>
                                                    <p class="info-label-value font-12px" (click)="openUiModal('ADD_BLUEPRINT_MODAL')"> 
                                                        {{productDetailsVMList[i].productISBNDetail.bluePrintRequired}}
                                                        <span class="material-icons cursor-pointer font-14px" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                                            edit
                                                        </span>
                                                    </p>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="expandedRow">
                                        <td class="pr-0 pl-2 pt-0" colspan="9">
                                            <div class="col-lg-12 display-flex pl-1 pr-0">
                                                <div class="col-lg-2 pr-0 pl-1">
                                                    <p class="info-label">Specs version no.</p>
                                                    <p class="info-label-value font-12px">
                                                        {{productDetailsVMList[i].productISBNDetail.specsVersionNo}}
                                                        <span class="font-12px blue-link" *ngIf="createCaseMode !== createCaseModes.EDIT">VIEW ALL</span>
                                                    </p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Owner</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.owner}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Job Type</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.jobType}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Weight</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.weight}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">F&G required</p>
                                                    <p class="info-label-value font-12px">
                                                        {{productDetailsVMList[i].productISBNDetail.fGRequired}}
                                                        <span class="material-icons cursor-pointer font-14px" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                                            edit
                                                        </span>
                                                    </p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Advances required</p>
                                                    <p class="info-label-value font-12px">
                                                        {{productDetailsVMList[i].productISBNDetail.advancesRequired}}
                                                        <span class="material-icons cursor-pointer font-14px" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                                            edit
                                                        </span>
                                                    </p>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="expandedRow">
                                        <td class="pr-0 pl-2 pt-0 pb-0" colspan="9">
                                            <div class="col-lg-12 display-flex pl-1 pr-0">
                                                <div class="col-lg-2 pr-0 pl-1">
                                                    <p class="info-label">Quote no.</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.quoteNo}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Est. Price</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.estimatedPrice}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <p class="info-label">Additional Unit price</p>
                                                    <p class="info-label-value font-12px">{{productDetailsVMList[i].productISBNDetail.additionalUnitPrice}}</p>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <span class="font-12px blue-link" *ngIf="createCaseMode !== createCaseModes.EDIT">Check Inventory</span>
                                                </div>
                                                <div class="col-lg-2 pr-0">
                                                    <span class="font-12px blue-link" *ngIf="createCaseMode !== createCaseModes.EDIT">View past orders</span>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <!-- <tr>
                                        <td class="pr-0 pl-2 pt-0" colspan="9">
                                            <mat-divider class="mt-1 mb-6 "></mat-divider>
                                        </td>
                                    </tr> -->
                                </ng-container>
                            </ng-container>
                        </tbody>
                      </table>
      
                    </div>
                    <!--end::Table-->
                  </div>
            </div>
        </div>
        <br><br>
        <div class="row sticky-bottom full-width pl-5 pb-4 product-detail-footer-row">
            <div class="col-lg-12" *ngIf="createCaseMode !== createCaseModes.EDIT">
                <a (click)="addRow()">
                    <span class="material-icons add-icon pr-2 cursor-pointer">
                        add_circle_outline
                    </span>
                    <span class="font-14px blue-link ">ADD ANOTHER</span>
                </a>
                <a>
                    <span class="font-14px blue-link float-right">CREATE ISBN</span>
                </a>
            </div>
        </div>
    </div>
</div>


<app-modal id="ADD_BLUEPRINT_MODAL" size="modal-lg">
    <app-add-blueprint-modal
      (acceptEvent)="handleAddBluePrintEvent('ADD_BLUEPRINT_MODAL')"
      (rejectEvent)="handleModalRejectEvent('ADD_BLUEPRINT_MODAL')"
    ></app-add-blueprint-modal>
</app-modal>