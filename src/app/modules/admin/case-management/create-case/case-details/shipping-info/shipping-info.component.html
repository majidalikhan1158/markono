<div class="card card-custom example example-compact gutter-b shipping-info-card">
    <div class="card-body position-relative">
        <div class="row">
            <div class="col-lg-12">
                <ng-container *ngFor="let shipment of shipmentsToDisplay;let i = index;">
                    <div class="card card-custom example example-compact shipping-info-details-card">
                        <div class="card-header">
                            <div class="card-title">
                            <h3 class="card-label">Shipment {{shipment.boxId}}</h3>
                            </div>
                            <div class="card-title">
                                <span class="font-12px color-AFAFAF pr-2">Category: </span>
                                <span class="font-12px card-label">{{shipment.shippingDetails.shipmentCategory}}</span>
                            </div>
                            <div class="card-title">
                                <span class="font-12px color-AFAFAF pr-2">Attention To: </span>
                                <span class="font-12px card-label">Ariadne Pte Ltd</span>
                            </div>
                            <div class="card-title">
                                <span class="font-12px color-AFAFAF pr-2">Shipment Qty: </span>
                                <span class="font-12px card-label">0</span>
                            </div>
                            <div class="card-toolbar">
                                <span class="material-icons delete-icon pr-2 cursor-pointer" (click)="deleteShipment(shipment.shipmentId)">
                                    delete
                                </span>
                                <span class="material-icons expansion-icon cursor-pointer" (click)="displayShipmentDetails(shipment.shipmentId)">
                                    {{ 
                                        shipment.boxId == boxIdToExpand ? 
                                        ExpansionIcons.KEYBOARD_ARROW_UP : 
                                        ExpansionIcons.KEYBOARD_ARROW_DOWN 
                                    }}
                                </span>
                            </div>
                        </div>
                        <div class="card-body" *ngIf="shouldShowShipmentDetails && shipment.boxId === boxIdToExpand">
                            <div class="row">
                                <div class="col-lg-12">
                                    <span class="span-yellow material-icons pr-2" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                        stop_circle
                                      </span>
                                    <span class="card-body-header">Shipping Details</span>
                                </div>
                            </div>
                            
                            <div class="row pt-3">
                                <div class="col-lg-12 display-flex">
                                    <div class="col-lg-3 pl-0">
                                        <mat-form-field appearance="fill">
                                            <mat-label>Billable?</mat-label>
                                            <mat-select [(ngModel)]="shipmentsToDisplay[i].shippingDetails.billable" [disabled]="disabled">
                                                <mat-option value="1">Yes</mat-option>
                                                <mat-option value="2">No</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-3 pr-0 pl-0">
                                        <mat-form-field appearance="fill">
                                            <mat-label>Shipment Promised Date</mat-label>
                                            <input matInput [matDatepicker]="picker" 
                                                [(ngModel)]="shipmentsToDisplay[i].shippingDetails.shippmentPromisedDate" [disabled]="disabled">
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                        </mat-form-field> 
                                    </div>
                                    <div class="col-lg-3 pr-0">
                                        <mat-form-field appearance="fill">
                                            <mat-label>Shipment Mode</mat-label>
                                            <mat-select  (selectionChange)="handleShipmentModeChange($event,shipment.shipmentId)" 
                                                [(ngModel)]="shipmentsToDisplay[i].shippingDetails.shipmentMode" [disabled]="disabled">
                                                <mat-option value="Air Freight">Air Freight</mat-option>
                                                <mat-option value="Bulk Mail">Bulk Mail</mat-option>
                                                <mat-option value="Land Freight">Land Freight</mat-option>
                                                <mat-option value="Sea Freight">Sea Freight</mat-option>
                                                <mat-option value="Internal Transfer (ML3PL)">Internal Transfer (ML3PL)</mat-option>
                                                <mat-option value="Internal Transfer (MPM3PL)">Internal Transfer (MPM3PL)</mat-option>
                                                <mat-option value="Internal Transfer (Library)">Internal Transfer (Library)</mat-option>
                                                <mat-option value="Postal">Postal</mat-option>
                                                
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-3 pr-0" *ngIf="!shipment.shippingDetails.isShipmentModeInternalTransfer && !shipment.shippingDetails.isShipmentModeLibrary">
                                        <mat-form-field appearance="fill">
                                            <mat-label>Shipping Terms</mat-label>
                                            <mat-select  [(ngModel)]="shipmentsToDisplay[i].shippingDetails.shippingTerms" [disabled]="disabled">
                                                <mat-option value="CIF">CIF</mat-option>
                                                <mat-option value="DDU">DDU</mat-option>
                                                <mat-option value="Ex-Factory">Ex-Factory</mat-option>
                                                <mat-option value="FDB">FDB</mat-option>
                                                <mat-option value="Self Collection">Self Collection</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-3 pr-0" *ngIf="shipment.shippingDetails.isShipmentModeInternalTransfer">
                                        <mat-form-field appearance="fill" class="">
                                            <mat-label>Storer Key</mat-label>
                                            <input matInput placeholder="Storer Key"
                                            [(ngModel)]="shipmentsToDisplay[i].shippingDetails.storerKey" [disabled]="disabled">
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>

                            <div class="row pt-3">
                                <div class="col-lg-12 display-flex" *ngIf="!shipment.shippingDetails.isShipmentModeInternalTransfer && !shipment.shippingDetails.isShipmentModeLibrary">
                                    <div class="col-lg-3 pl-0">
                                        <mat-form-field appearance="fill">
                                            <mat-label>Shipping Agent</mat-label>
                                            <mat-select  [(ngModel)]="shipmentsToDisplay[i].shippingDetails.shippingAgent" [disabled]="disabled">
                                                <mat-option value="UPS">UPS</mat-option>
                                                <mat-option value="SF Express">SF Express</mat-option>
                                                <mat-option value="Hock Cheong">Hock Cheong</mat-option>
                                                <mat-option value="Singpost">Singpost</mat-option>
                                                <mat-option value="DHL">DHL</mat-option>
                                                <mat-option value="Asendia">Asendia</mat-option>
                                                <mat-option value="EES">EES</mat-option>
                                                <mat-option value="YFE">YFE</mat-option>
                                                <mat-option value="Publiship">Publiship</mat-option>
                                                <mat-option value="GE Line">GE Line</mat-option>
                                                <mat-option value="Shipco">Shipco</mat-option>
                                                <mat-option value="Rohlig">Rohlig</mat-option>
                                                <mat-option value="Others">Others</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-3 pr-0 pl-0">
                                        <mat-form-field appearance="fill">
                                            <mat-label>Account No</mat-label>
                                            <input matInput  [(ngModel)]="shipmentsToDisplay[i].shippingDetails.accountNumber" [disabled]="disabled">
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row pt-5">
                                <div class="col-lg-12">
                                    <span class="span-yellow material-icons pr-2" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                        stop_circle
                                      </span>
                                    <span class="card-body-header">Items</span>
                                </div>
                            </div>
                            <div class="row pt-3">
                                <div class="col-lg-12">
                                    <div class="tab-content">
                                        <!--begin::Table-->
                                        <div class="table-responsive">
                                        <table class="table table-head-custom table-vertical-center
                                        shipping-info-details-table">
                                            <thead>
                                            <tr class="text-left">
                                                <th>#</th>
                                                <th>ISBN/Product No</th>
                                                <th>Title</th>
                                                <th>Available Qty</th>
                                                <th>This Shipment Qty</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>9781760422791</td>
                                                <td>Passer Psychology 3e</td>
                                                <td>140</td>
                                                <td>
                                                    <mat-form-field appearance="fill" class="">
                                                        <mat-label>Shipment Qty</mat-label>
                                                        <input matInput [(ngModel)]="shipmentsToDisplay[i].shippingItems.shipmentQty" [disabled]="disabled">
                                                    </mat-form-field>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                        
                                        </div>
                                        <!--end::Table-->
                                    </div>
                                </div>
                            </div>

                            <div class="row pt-5">
                                <div class="col-lg-12">
                                    <span class="span-yellow material-icons pr-2" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                        stop_circle
                                      </span>
                                    <span class="card-body-header">Shipment Specific Costs</span>
                                </div>
                            </div>
                            <div class="row pt-3">
                                <div class="col-lg-12">
                                    <div class="tab-content">
                                        <!--begin::Table-->
                                        <div class="">
                                        <table class="table table-head-custom table-vertical-center
                                        shipping-info-details-table">
                                            <thead>
                                            <tr class="text-left">
                                                <th>#</th>
                                                <th>Cost Category</th>
                                                <th>Description</th>
                                                <th>Sub-Total</th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let rowId of shipmentsToDisplay[i].shippingSpecificCost;let j = index;">
                                                <td>{{rowId.id}}</td>
                                                <td>
                                                    <mat-form-field appearance="fill">
                                                        <mat-label>Choose</mat-label>
                                                        <mat-select  [(ngModel)]="rowId.costCategory" [disabled]="disabled">
                                                            <mat-option value="Filfillment">Filfillment</mat-option>
                                                            <mat-option value="Fulfillment">Fulfillment</mat-option>
                                                            <mat-option value="Packing Materials">Packing Materials</mat-option>
                                                            <mat-option value="Order Handling">Order Handling</mat-option>
                                                            <mat-option value="Shipping">Shipping</mat-option>
                                                            <mat-option value="Storage Charges">Storage Charges</mat-option>
                                                            <mat-option value="Value Added Services">Value Added Services</mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                </td>
                                                <td>
                                                    <mat-form-field appearance="fill">
                                                        <mat-label>Write Description</mat-label>
                                                        <input matInput   [(ngModel)]="rowId.description" [disabled]="disabled">
                                                    </mat-form-field>
                                                </td>
                                                <td>
                                                    <mat-form-field appearance="fill">
                                                        <mat-label>Sub total</mat-label>
                                                        <input matInput   [(ngModel)]="rowId.subTotal" [disabled]="disabled">
                                                    </mat-form-field>
                                                </td>
                                                <td>
                                                    <span class="material-icons delete-icon pr-2 cursor-pointer pt-3" (click)="deleteRow(shipment.shipmentId,rowId.id)" *ngIf="shipmentsToDisplay[i].shippingSpecificCost.length > 1">
                                                        delete
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr  *ngIf="createCaseMode !== createCaseModes.EDIT">
                                                <td colspan="5" class="pb-3">
                                                    <a (click)="addRow(shipment.shipmentId)">
                                                        <span class="material-icons add-icon pr-2 cursor-pointer">
                                                            add_circle_outline
                                                        </span>
                                                        <span class="font-14px blue-link ">ADD ANOTHER</span>
                                                    </a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                        
                                        </div>
                                        <!--end::Table-->
                                    </div>
                                </div>
                            </div>
                            <div class="display-flex pt-5">
                                <div class="col-lg-6 pl-0">
                                    <span class="span-yellow material-icons pr-2" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                        stop_circle
                                      </span>
                                    <span class="card-body-header">Shipment to Address</span>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Attention To</mat-label>
                                                <input matInput value="Ariadne Pte Ltd">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Contact Person</mat-label>
                                                <input matInput value="Desmond Foo">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Email</mat-label>
                                                <input matInput value="desmond@ariadne.sg">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Phone</mat-label>
                                                <input matInput placeholder="Phone">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Address 1</mat-label>
                                                <input matInput value="50 Tagore Lane">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Address 2</mat-label>
                                                <input matInput value="#02-10G">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>City</mat-label>
                                                <input matInput value="Singapore">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Postcode</mat-label>
                                                <input matInput value="787494">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>State</mat-label>
                                                <input matInput placeholder="State">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pl-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Country</mat-label>
                                                <input matInput placeholder="Country">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 pl-0 pr-0">
                                    <span class="span-yellow material-icons pr-2" *ngIf="createCaseMode !== createCaseModes.EDIT">
                                        stop_circle
                                      </span>
                                    <span class="card-body-header">Billing Details</span>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Bill-to No</mat-label>
                                                <input matInput value="DPA152">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Attention To</mat-label>
                                                <input matInput value="Ariadne Pte Ltd">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Contact Person</mat-label>
                                                <input matInput value="Desmond Foo">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Email</mat-label>
                                                <input matInput value="desmond@ariadne.sg">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Phone</mat-label>
                                                <input matInput placeholder="Phone">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Address 1</mat-label>
                                                <input matInput value="50 Tagore Lane">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Address 2</mat-label>
                                                <input matInput value="#02-10G">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>City</mat-label>
                                                <input matInput value="Singapore">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Postcode</mat-label>
                                                <input matInput value="787494">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>State</mat-label>
                                                <input matInput placeholder="State">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Country</mat-label>
                                                <input matInput placeholder="Country">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-lg-6 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Co-ordinator</mat-label>
                                                <input matInput placeholder="Co-ordinator">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 display-flex pl-0 pr-0 pt-3">
                                        <div class="col-lg-6 pl-0 pr-0">
                                            <mat-form-field appearance="fill">
                                                <mat-label>Sales Person</mat-label>
                                                <input matInput value="Dosmond Chew">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                 </ng-container>
            </div>
        </div>
        <div class="row pt-4" style="margin: auto">
            <div class="col-lg-12 padding-0px"  *ngIf="createCaseMode !== createCaseModes.EDIT">
                <div class="col-lg-4">
                    <mat-form-field appearance="fill">
                        <mat-label>Add Shipment Type</mat-label>
                        <mat-select (selectionChange)="handleShipmentTypeChange($event)" [compareWith]="compare"
                        [formControl]="shipmentSelectedTypeFormControl" >
                            <mat-option [value]="type.value" *ngFor="let type of shipmentTypesArray">{{type.text}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                  
                </div>
            </div>
        </div> 
    </div>
</div> 